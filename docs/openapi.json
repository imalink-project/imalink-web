{"openapi":"3.1.0","info":{"title":"ImaLink API","description":"Pure API backend for image gallery and management system","version":"0.1.0"},"paths":{"/api/v1/auth/register":{"post":{"tags":["authentication"],"summary":"Register","description":"Register a new user account\n\nRate limit: 5 registrations per hour per IP\n\nArgs:\n    user_data: User registration information\n    db: Database session\n    \nReturns:\n    Created user information (without password)\n    \nRaises:\n    HTTPException: If username or email already exists","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["authentication"],"summary":"Login","description":"Login user and return access token\n\nRate limit: 10 login attempts per minute per IP\n\nArgs:\n    login_data: User login credentials\n    db: Database session\n    \nReturns:\n    Access token and user information\n    \nRaises:\n    HTTPException: If credentials are invalid","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserToken"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["authentication"],"summary":"Get Current User Profile","description":"Get current user's profile information\n\nArgs:\n    current_user: Current authenticated user\n    \nReturns:\n    Current user's profile information","operationId":"get_current_user_profile_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/logout":{"post":{"tags":["authentication"],"summary":"Logout","description":"Logout user (placeholder endpoint)\n\nNote: With JWT tokens, logout is typically handled client-side\nby removing the token. For server-side token blacklisting,\nadditional implementation would be needed.\n\nReturns:\n    Success message","operationId":"logout_api_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/users/me":{"get":{"tags":["users"],"summary":"Get My Profile","description":"Get current user's profile information\n\nArgs:\n    current_user: Current authenticated user\n    \nReturns:\n    Current user's profile information with statistics","operationId":"get_my_profile_api_v1_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["users"],"summary":"Update My Profile","description":"Update current user's profile information\n\nArgs:\n    user_update: Updated user information\n    current_user: Current authenticated user\n    db: Database session\n    \nReturns:\n    Updated user information\n    \nRaises:\n    HTTPException: If update fails (e.g., email already exists)","operationId":"update_my_profile_api_v1_users_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]},"delete":{"tags":["users"],"summary":"Deactivate My Account","description":"Deactivate current user's account\n\nArgs:\n    current_user: Current authenticated user\n    db: Database session\n    \nReturns:\n    Success message","operationId":"deactivate_my_account_api_v1_users_me_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users/me/change-password":{"post":{"tags":["users"],"summary":"Change My Password","description":"Change current user's password\n\nArgs:\n    password_data: Current and new password\n    current_user: Current authenticated user\n    db: Database session\n    \nReturns:\n    Success message\n    \nRaises:\n    HTTPException: If current password is incorrect","operationId":"change_my_password_api_v1_users_me_change_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserChangePassword"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/import-sessions/":{"post":{"tags":["import-sessions"],"summary":"Create Import Session","description":"Create a new import session (user's reference metadata).\n\nClient has already imported the images - this just records metadata.","operationId":"create_import_session_api_v1_import_sessions__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportSessionCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["import-sessions"],"summary":"List Import Sessions","description":"List all import sessions with pagination","operationId":"list_import_sessions_api_v1_import_sessions__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportSessionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/import-sessions/{import_id}":{"get":{"tags":["import-sessions"],"summary":"Get Import Session","description":"Get a specific import session by ID","operationId":"get_import_session_api_v1_import_sessions__import_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"import_id","in":"path","required":true,"schema":{"type":"integer","title":"Import Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["import-sessions"],"summary":"Update Import Session","description":"Update import session metadata","operationId":"update_import_session_api_v1_import_sessions__import_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"import_id","in":"path","required":true,"schema":{"type":"integer","title":"Import Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportSessionUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["import-sessions"],"summary":"Delete Import Session","description":"Delete an import session.\n\nWARNING: This will also delete all images associated with this import session\ndue to cascade delete. Use with caution.","operationId":"delete_import_session_api_v1_import_sessions__import_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"import_id","in":"path","required":true,"schema":{"type":"integer","title":"Import Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/authors/":{"get":{"tags":["authors"],"summary":"List Authors","description":"List all authors (shared across all users) with pagination","operationId":"list_authors_api_v1_authors__get","parameters":[{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_AuthorResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["authors"],"summary":"Create Author","description":"Create a new author (requires authentication)","operationId":"create_author_api_v1_authors__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/authors/{author_id}":{"get":{"tags":["authors"],"summary":"Get Author","description":"Get author by ID (available to all users)","operationId":"get_author_api_v1_authors__author_id__get","parameters":[{"name":"author_id","in":"path","required":true,"schema":{"type":"integer","title":"Author Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["authors"],"summary":"Update Author","description":"Update an existing author (requires authentication)","operationId":"update_author_api_v1_authors__author_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"author_id","in":"path","required":true,"schema":{"type":"integer","title":"Author Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["authors"],"summary":"Delete Author","description":"Delete an author (requires authentication)","operationId":"delete_author_api_v1_authors__author_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"author_id","in":"path","required":true,"schema":{"type":"integer","title":"Author Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/debug/status":{"get":{"tags":["debug"],"summary":"Dev Status","description":"Get development environment status","operationId":"dev_status_api_v1_debug_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/debug/reset-database":{"post":{"tags":["debug"],"summary":"Reset Database","description":"ðŸš¨ DANGER: Reset entire database (development only)\n\nThis will delete ALL data in the database!\n\nParameters:\n- confirm: Must be exactly \"DELETE_EVERYTHING\" to proceed","operationId":"reset_database_api_v1_debug_reset_database_post","parameters":[{"name":"confirm","in":"query","required":false,"schema":{"type":"string","default":"no","title":"Confirm"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/debug/clear-table/{table_name}":{"delete":{"tags":["debug"],"summary":"Clear Table","description":"Clear specific table (development only)\n\nParameters:\n- table_name: Name of table to clear (images, authors, import_sessions)\n- confirm: Must be \"CLEAR_TABLE\" to proceed","operationId":"clear_table_api_v1_debug_clear_table__table_name__delete","parameters":[{"name":"table_name","in":"path","required":true,"schema":{"type":"string","title":"Table Name"}},{"name":"confirm","in":"query","required":false,"schema":{"type":"string","default":"no","title":"Confirm"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/debug/database-stats":{"get":{"tags":["debug"],"summary":"Database Stats","description":"Get current database statistics","operationId":"database_stats_api_v1_debug_database_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/debug/database-schema":{"get":{"tags":["debug"],"summary":"Database Schema","description":"Get detailed database schema information","operationId":"database_schema_api_v1_debug_database_schema_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/debug/clear-database":{"post":{"tags":["debug"],"summary":"Clear Database","description":"ðŸš¨ DANGER: Clear all data from database (development only)\n\nThis will delete ALL records from all tables but preserve the schema.\nSafer than reset-database as it doesn't drop tables.","operationId":"clear_database_api_v1_debug_clear_database_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/photos/":{"get":{"tags":["photos"],"summary":"List Photos","description":"Get paginated list of photos with metadata (supports anonymous access to public photos)","operationId":"list_photos_api_v1_photos__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of photos to skip","default":0,"title":"Offset"},"description":"Number of photos to skip"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Number of photos to return","default":100,"title":"Limit"},"description":"Number of photos to return"},{"name":"author_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by author ID","title":"Author Id"},"description":"Filter by author ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_PhotoResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/search":{"post":{"tags":["photos"],"summary":"Search Photos","description":"Search photos with advanced filtering (user-scoped)\n\nDEPRECATED: This endpoint is maintained for backwards compatibility.\nNew code should use POST /api/v1/photo-searches/ad-hoc instead.\n\nThis endpoint will be removed in a future version.","operationId":"search_photos_api_v1_photos_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_PhotoResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/photos/{hothash}/files":{"get":{"tags":["photos"],"summary":"Get Photo Files","description":"Get list of ImageFiles for a photo\n\nReturns all files associated with this photo (JPEG, RAW, etc.)","operationId":"get_photo_files_api_v1_photos__hothash__files_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ImageFileResponse"},"title":"Response Get Photo Files Api V1 Photos  Hothash  Files Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/{hothash}":{"get":{"tags":["photos"],"summary":"Get Photo","description":"Get single photo by hash (supports anonymous access for public photos)","operationId":"get_photo_api_v1_photos__hothash__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["photos"],"summary":"Update Photo","description":"Update existing photo (user-scoped)","operationId":"update_photo_api_v1_photos__hothash__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["photos"],"summary":"Delete Photo","description":"Delete photo and all associated image files (user-scoped)","operationId":"delete_photo_api_v1_photos__hothash__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/{hothash}/hotpreview":{"get":{"tags":["photos"],"summary":"Get Hotpreview","description":"Get hotpreview image for photo","operationId":"get_hotpreview_api_v1_photos__hothash__hotpreview_get","parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/{hothash}/coldpreview":{"put":{"tags":["photos"],"summary":"Upload Coldpreview","description":"Upload or update coldpreview for photo","operationId":"upload_coldpreview_api_v1_photos__hothash__coldpreview_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_coldpreview_api_v1_photos__hothash__coldpreview_put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["photos"],"summary":"Get Coldpreview","description":"Get coldpreview image for photo with optional resizing","operationId":"get_coldpreview_api_v1_photos__hothash__coldpreview_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}},{"name":"width","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":2000,"minimum":100},{"type":"null"}],"description":"Target width for dynamic resizing","title":"Width"},"description":"Target width for dynamic resizing"},{"name":"height","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":2000,"minimum":100},{"type":"null"}],"description":"Target height for dynamic resizing","title":"Height"},"description":"Target height for dynamic resizing"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["photos"],"summary":"Delete Coldpreview","description":"Delete coldpreview for photo","operationId":"delete_coldpreview_api_v1_photos__hothash__coldpreview_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/{hothash}/timeloc-correction":{"patch":{"tags":["photos"],"summary":"Update Timeloc Correction","description":"Apply non-destructive time/location correction to photo\n\n- Send correction data to override EXIF values\n- Send `null` to restore original EXIF values\n- Original EXIF data in Photo.exif_dict is never modified","operationId":"update_timeloc_correction_api_v1_photos__hothash__timeloc_correction_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/TimeLocCorrectionRequest"},{"type":"null"}],"title":"Correction"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/{hothash}/view-correction":{"patch":{"tags":["photos"],"summary":"Update View Correction","description":"Update view correction settings (frontend rendering hints only)\n\n- Send correction data to set rotation, crop, exposure adjustments\n- Send `null` to remove all view corrections\n- Backend only stores metadata - no image processing","operationId":"update_view_correction_api_v1_photos__hothash__view_correction_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ViewCorrectionRequest"},{"type":"null"}],"title":"Correction"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/{hothash}/tags":{"post":{"tags":["photos"],"summary":"Add Tags To Photo","description":"Add one or more tags to a photo.\n\nTags are created automatically if they don't exist.\nDuplicate tags are silently skipped.\n\n**Request body:**\n```json\n{\n    \"tags\": [\"landscape\", \"sunset\", \"norway\"]\n}\n```","operationId":"add_tags_to_photo_api_v1_photos__hothash__tags_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddTagsRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddTagsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/{hothash}/tags/{tag_name}":{"delete":{"tags":["photos"],"summary":"Remove Tag From Photo","description":"Remove a specific tag from a photo.\n\nThe tag itself remains in the database for reuse.\nReturns 404 if photo or tag not found.","operationId":"remove_tag_from_photo_api_v1_photos__hothash__tags__tag_name__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}},{"name":"tag_name","in":"path","required":true,"schema":{"type":"string","title":"Tag Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveTagResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/{hothash}/stack":{"get":{"tags":["photos"],"summary":"Get Photo Stack","description":"Get the stack containing this photo.\n\nReturns the stack if photo belongs to one, null otherwise.\nWith one-to-many relationship, each photo can belong to at most one stack.","operationId":"get_photo_stack_api_v1_photos__hothash__stack_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hothash","in":"path","required":true,"schema":{"type":"string","title":"Hothash"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/PhotoStackSummary"},{"type":"null"}],"title":"Response Get Photo Stack Api V1 Photos  Hothash  Stack Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photos/create":{"post":{"tags":["photos"],"summary":"Create Photo","description":"Create Photo from PhotoCreateSchema (New Architecture)\n\nPhotoCreateSchema is the complete JSON package from imalink-core server containing\nall image processing results. Frontend sends image to imalink-core server,\nreceives PhotoCreateSchema, then sends it here with user organization metadata.\n\nFlow:\n1. Frontend â†’ imalink-core server (POST /process) â†’ PhotoCreateSchema\n2. Frontend â†’ Backend (POST /photos/create) â†’ Photo created\n\nThis replaces the old POST /photos endpoint which did image processing.\nBackend now only stores metadata and previews from PhotoCreateSchema.","operationId":"create_photo_api_v1_photos_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoCreateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoCreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/photos/register-image":{"post":{"tags":["photos"],"summary":"Register Image","description":"Register image by sending to imalink-core for processing (Convenience endpoint)\n\n**Use case**: Quick web upload when user doesn't have desktop app available.\n**Not recommended for**: Batch imports (use desktop app with local imalink-core instead).\n\nFlow:\n1. Frontend uploads raw image file (multipart/form-data)\n2. Backend sends to imalink-core server (localhost:8001) for processing\n3. imalink-core returns PhotoCreateSchema (metadata + previews)\n4. Backend stores PhotoCreateSchema (same as POST /create endpoint)\n\nNote: Original image is NOT stored on server, only metadata and previews.\n\nArgs:\n    file: Image file (JPEG, PNG, etc.)\n    import_session_id: Optional import session (defaults to protected 'Quick Add')\n    rating: Star rating 0-5\n    visibility: Visibility level (private, space, authenticated, public)\n    author_id: Optional photographer/author\n    coldpreview_size: Optional size for larger preview (e.g., 2560px)\n    \nReturns:\n    PhotoCreateResponse: Created photo metadata\n    \nRaises:\n    400: If image processing fails or invalid image\n    500: If imalink-core service unavailable","operationId":"register_image_api_v1_photos_register_image_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"import_session_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Import session ID (uses protected 'Quick Add' if not provided)","title":"Import Session Id"},"description":"Import session ID (uses protected 'Quick Add' if not provided)"},{"name":"rating","in":"query","required":false,"schema":{"type":"integer","maximum":5,"minimum":0,"description":"Star rating 0-5","default":0,"title":"Rating"},"description":"Star rating 0-5"},{"name":"visibility","in":"query","required":false,"schema":{"type":"string","pattern":"^(private|space|authenticated|public)$","description":"Visibility level","default":"private","title":"Visibility"},"description":"Visibility level"},{"name":"author_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Author ID","title":"Author Id"},"description":"Author ID"},{"name":"coldpreview_size","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":150},{"type":"null"}],"description":"Size for coldpreview (e.g., 2560)","title":"Coldpreview Size"},"description":"Size for coldpreview (e.g., 2560)"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_register_image_api_v1_photos_register_image_post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoCreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photo-searches/ad-hoc":{"post":{"tags":["photo-searches"],"summary":"Search Photos Adhoc","description":"Execute an ad-hoc photo search without saving it\n\nThis is the primary search endpoint - send PhotoSearchRequest and get results.\nUse this for one-time searches or before deciding to save a search.","operationId":"search_photos_adhoc_api_v1_photo_searches_ad_hoc_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_PhotoResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/photo-searches/":{"post":{"tags":["photo-searches"],"summary":"Create Saved Search","description":"Create a new saved photo search\n\nSave a search for later reuse. The search_criteria should be a valid\nPhotoSearchRequest as a dict.","operationId":"create_saved_search_api_v1_photo_searches__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavedPhotoSearchCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavedPhotoSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["photo-searches"],"summary":"List Saved Searches","description":"List all saved searches for the current user","operationId":"list_saved_searches_api_v1_photo_searches__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}},{"name":"favorites_only","in":"query","required":false,"schema":{"type":"boolean","description":"Show only favorite searches","default":false,"title":"Favorites Only"},"description":"Show only favorite searches"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavedPhotoSearchListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photo-searches/{search_id}":{"get":{"tags":["photo-searches"],"summary":"Get Saved Search","description":"Get a specific saved search by ID","operationId":"get_saved_search_api_v1_photo_searches__search_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"search_id","in":"path","required":true,"schema":{"type":"integer","title":"Search Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavedPhotoSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["photo-searches"],"summary":"Update Saved Search","description":"Update a saved search","operationId":"update_saved_search_api_v1_photo_searches__search_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"search_id","in":"path","required":true,"schema":{"type":"integer","title":"Search Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavedPhotoSearchUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavedPhotoSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["photo-searches"],"summary":"Delete Saved Search","description":"Delete a saved search","operationId":"delete_saved_search_api_v1_photo_searches__search_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"search_id","in":"path","required":true,"schema":{"type":"integer","title":"Search Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photo-searches/{search_id}/execute":{"post":{"tags":["photo-searches"],"summary":"Execute Saved Search","description":"Execute a saved search and return photo results\n\nThis will run the saved search criteria and return matching photos.\nUpdates the last_executed timestamp and result_count for the saved search.\n\nYou can override the pagination parameters without modifying the saved search.","operationId":"execute_saved_search_api_v1_photo_searches__search_id__execute_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"search_id","in":"path","required":true,"schema":{"type":"integer","title":"Search Id"}},{"name":"override_offset","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":0},{"type":"null"}],"description":"Override pagination offset","title":"Override Offset"},"description":"Override pagination offset"},{"name":"override_limit","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":1000,"minimum":1},{"type":"null"}],"description":"Override pagination limit","title":"Override Limit"},"description":"Override pagination limit"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_PhotoResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/collections":{"post":{"tags":["Photo Collections"],"summary":"Create new photo collection","description":"Create new photo collection.\n\n- **name**: Collection name (required, 1-255 chars)\n- **description**: Optional description\n- **hothashes**: Optional initial photos (must exist and belong to user)","operationId":"create_collection_api_v1_collections_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoCollectionCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoCollectionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Photo Collections"],"summary":"List all collections","description":"List all photo collections for current user.\n\n- **skip**: Number of collections to skip (pagination)\n- **limit**: Maximum collections to return (max 100)","operationId":"list_collections_api_v1_collections_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/collections/{collection_id}":{"get":{"tags":["Photo Collections"],"summary":"Get collection by ID","description":"Get specific collection by ID","operationId":"get_collection_api_v1_collections__collection_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoCollectionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Photo Collections"],"summary":"Update collection metadata","description":"Update collection name and/or description.\nDoes not affect photos in collection.\n\n- **name**: New name (optional)\n- **description**: New description (optional)","operationId":"update_collection_api_v1_collections__collection_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoCollectionUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoCollectionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Photo Collections"],"summary":"Delete collection","description":"Delete collection permanently.\nPhotos themselves are not deleted, only the collection.","operationId":"delete_collection_api_v1_collections__collection_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/collections/{collection_id}/photos":{"post":{"tags":["Photo Collections"],"summary":"Add photos to collection","description":"Add photos to collection (appends to end).\n\n- **hothashes**: List of photo hothashes to add\n\nDuplicates are automatically skipped.\nPhotos must exist and belong to user.","operationId":"add_photos_to_collection_api_v1_collections__collection_id__photos_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddPhotosRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoManagementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Photo Collections"],"summary":"Remove photos from collection","description":"Remove photos from collection.\n\n- **hothashes**: List of photo hothashes to remove","operationId":"remove_photos_from_collection_api_v1_collections__collection_id__photos_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemovePhotosRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoManagementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Photo Collections"],"summary":"Get photos in collection","description":"Get actual Photo objects in collection.\n\n- **skip**: Number of photos to skip\n- **limit**: Maximum photos to return\n\nReturns photos in collection order.","operationId":"get_collection_photos_api_v1_collections__collection_id__photos_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PhotoResponse"},"title":"Response Get Collection Photos Api V1 Collections  Collection Id  Photos Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/collections/{collection_id}/photos/reorder":{"put":{"tags":["Photo Collections"],"summary":"Reorder photos in collection","description":"Reorder photos in collection.\n\n- **hothashes**: Complete list of hothashes in new order\n\nMust contain exactly the same hothashes as current collection,\njust in different order. First photo becomes cover photo.","operationId":"reorder_collection_photos_api_v1_collections__collection_id__photos_reorder_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReorderPhotosRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoManagementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/collections/{collection_id}/cleanup":{"post":{"tags":["Photo Collections"],"summary":"Clean up invalid photos","description":"Remove photos that no longer exist in database.\n\nReturns number of invalid photos removed.","operationId":"cleanup_collection_api_v1_collections__collection_id__cleanup_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Cleanup Collection Api V1 Collections  Collection Id  Cleanup Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tags":{"get":{"tags":["tags"],"summary":"List Tags","description":"List all tags for current user with photo counts\n\n**Sort options:**\n- `name`: Alphabetical order\n- `count`: By number of photos (most used first)\n- `created_at`: By creation date\n\n**Order:**\n- `asc`: Ascending\n- `desc`: Descending","operationId":"list_tags_api_v1_tags_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","pattern":"^(name|count|created_at)$","default":"name","title":"Sort By"}},{"name":"order","in":"query","required":false,"schema":{"type":"string","pattern":"^(asc|desc)$","default":"asc","title":"Order"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TagListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tags/autocomplete":{"get":{"tags":["tags"],"summary":"Autocomplete Tags","description":"Get tag suggestions for autocomplete (prefix matching)\n\nResults are ordered by photo count (most used first).","operationId":"autocomplete_tags_api_v1_tags_autocomplete_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":1,"description":"Search query","title":"Q"},"description":"Search query"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"Max results","default":10,"title":"Limit"},"description":"Max results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TagAutocompleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tags/{tag_id}":{"put":{"tags":["tags"],"summary":"Rename Tag","description":"Rename a tag (applies to all photos using it)\n\nReturns 404 if tag not found or doesn't belong to user.\nReturns 409 if new name already exists for user.","operationId":"rename_tag_api_v1_tags__tag_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tag_id","in":"path","required":true,"schema":{"type":"integer","title":"Tag Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TagUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RenameTagResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["tags"],"summary":"Delete Tag","description":"Delete a tag completely (removes from all photos)\n\n**Warning:** This action cannot be undone.\nThe tag will be removed from all photos that have it.\n\nReturns 404 if tag not found or doesn't belong to user.","operationId":"delete_tag_api_v1_tags__tag_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tag_id","in":"path","required":true,"schema":{"type":"integer","title":"Tag Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteTagResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/timeline/":{"get":{"tags":["timeline"],"summary":"Get Timeline","description":"Get hierarchical timeline aggregation of photos.\n\nNavigate photos by time with automatic aggregation into buckets.\nEach bucket includes photo count, representative preview, and date range.\n\n**Granularity Levels:**\n- `year`: Aggregate by year (no parameters required)\n- `month`: Aggregate by month within a year (requires `year`)\n- `day`: Aggregate by day within a month (requires `year` and `month`)\n- `hour`: Aggregate by hour within a day (requires `year`, `month`, and `day`)\n\n**Preview Selection:**\n1. Highest rated photo (rating 4-5)\n2. Temporally centered photo (middle of period)\n3. First photo in period\n\n**Visibility Filtering:**\n- Anonymous users: Only `public` photos\n- Authenticated users: Own photos + `authenticated` + `public` photos\n- Empty buckets (no accessible photos) are excluded\n\n**Examples:**\n- `GET /timeline?granularity=year` - All years with photos\n- `GET /timeline?granularity=month&year=2024` - Months in 2024\n- `GET /timeline?granularity=day&year=2024&month=6` - Days in June 2024\n- `GET /timeline?granularity=hour&year=2024&month=6&day=15` - Hours on June 15, 2024\n\nReturns:\n    TimelineResponse with array of time buckets and metadata","operationId":"get_timeline_api_v1_timeline__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"granularity","in":"query","required":false,"schema":{"enum":["year","month","day","hour"],"type":"string","description":"Time bucket granularity (year/month/day/hour)","default":"year","title":"Granularity"},"description":"Time bucket granularity (year/month/day/hour)"},{"name":"year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":2100,"minimum":1900},{"type":"null"}],"description":"Filter to specific year (required for month/day/hour)","title":"Year"},"description":"Filter to specific year (required for month/day/hour)"},{"name":"month","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":12,"minimum":1},{"type":"null"}],"description":"Filter to specific month (required for day/hour, requires year)","title":"Month"},"description":"Filter to specific month (required for day/hour, requires year)"},{"name":"day","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":31,"minimum":1},{"type":"null"}],"description":"Filter to specific day (required for hour, requires year and month)","title":"Day"},"description":"Filter to specific day (required for hour, requires year and month)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimelineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photo-stacks/":{"get":{"tags":["photo-stacks"],"summary":"Get Photo Stacks","description":"Get paginated list of photo stacks for the current user.\n\nReturns PhotoStack summaries with photo counts but not full photo lists.\nUse the detail endpoint to get photo hashes for a specific stack.","operationId":"get_photo_stacks_api_v1_photo_stacks__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of items to skip","default":0,"title":"Offset"},"description":"Number of items to skip"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of items to return","default":50,"title":"Limit"},"description":"Number of items to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_PhotoStackSummary_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["photo-stacks"],"summary":"Create Photo Stack","description":"Create a new photo stack with optional initial photos.\n\nThe stack can be created empty and photos added later, or with initial photos.\nIf photo_hothashes are provided, they will be validated and added to the stack.","operationId":"create_photo_stack_api_v1_photo_stacks__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoStackCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoStackOperationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photo-stacks/{stack_id}":{"get":{"tags":["photo-stacks"],"summary":"Get Photo Stack","description":"Get detailed information about a specific photo stack including all photo hashes.","operationId":"get_photo_stack_api_v1_photo_stacks__stack_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"stack_id","in":"path","required":true,"schema":{"type":"integer","title":"Stack Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoStackDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["photo-stacks"],"summary":"Update Photo Stack","description":"Update photo stack metadata (cover photo, stack type).\n\nThis endpoint only updates metadata - use the photo management endpoints\nto add/remove photos from the stack.","operationId":"update_photo_stack_api_v1_photo_stacks__stack_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"stack_id","in":"path","required":true,"schema":{"type":"integer","title":"Stack Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoStackUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoStackOperationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["photo-stacks"],"summary":"Delete Photo Stack","description":"Delete a photo stack.\n\nThis removes the stack and all photo memberships but does not delete\nthe actual Photo objects - they remain in the system unchanged.","operationId":"delete_photo_stack_api_v1_photo_stacks__stack_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"stack_id","in":"path","required":true,"schema":{"type":"integer","title":"Stack Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoStackOperationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photo-stacks/{stack_id}/photo":{"post":{"tags":["photo-stacks"],"summary":"Add Photo To Stack","description":"Add a single photo to a photo stack.\n\nIf the photo is already in another stack, it will be removed from that stack first.\nEach photo can only belong to one stack at a time.","operationId":"add_photo_to_stack_api_v1_photo_stacks__stack_id__photo_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"stack_id","in":"path","required":true,"schema":{"type":"integer","title":"Stack Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoStackAddPhotoRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoStackPhotoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/photo-stacks/{stack_id}/photo/{photo_hothash}":{"delete":{"tags":["photo-stacks"],"summary":"Remove Photo From Stack","description":"Remove a single photo from a photo stack.\n\nStack remains even if empty - use DELETE /{stack_id} to delete empty stacks manually.","operationId":"remove_photo_from_stack_api_v1_photo_stacks__stack_id__photo__photo_hothash__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"stack_id","in":"path","required":true,"schema":{"type":"integer","title":"Stack Id"}},{"name":"photo_hothash","in":"path","required":true,"schema":{"type":"string","title":"Photo Hothash"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoStackPhotoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/phototext/":{"post":{"tags":["phototext"],"summary":"Create Document","description":"Create a new PhotoText document.\n\nDocument types:\n- general: Full-featured (headings, paragraphs, lists, images)\n- album: Image-focused (only images/collages)\n- slideshow: Presentation-style (single images per block)\n\nThe content field must be a complete PhotoText JSON document structure.\nImages are referenced by hothash (SHA256 from Photo model).","operationId":"create_document_api_v1_phototext__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoTextDocumentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoTextDocumentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["phototext"],"summary":"List Documents","description":"List PhotoText documents with optional filtering and sorting.\n\nAccess rules (Phase 1):\n- Anonymous users: Only public documents\n- Authenticated users: Own documents + public documents\n\nSupports filtering by document_type and publication status.\nReturns paginated results with total count.","operationId":"list_documents_api_v1_phototext__get","parameters":[{"name":"document_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by document type (general/album/slideshow)","title":"Document Type"},"description":"Filter by document type (general/album/slideshow)"},{"name":"is_published","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by publication status","title":"Is Published"},"description":"Filter by publication status"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of documents per page","default":20,"title":"Limit"},"description":"Number of documents per page"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of documents to skip","default":0,"title":"Offset"},"description":"Number of documents to skip"},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","description":"Sort field (created_at, updated_at, title)","default":"created_at","title":"Sort By"},"description":"Sort field (created_at, updated_at, title)"},{"name":"sort_order","in":"query","required":false,"schema":{"type":"string","description":"Sort order (asc, desc)","default":"desc","title":"Sort Order"},"description":"Sort order (asc, desc)"},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoTextDocumentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/phototext/{document_id}":{"get":{"tags":["phototext"],"summary":"Get Document","description":"Get a single PhotoText document by ID.\n\nAccess rules (Phase 1):\n- Anonymous users: Only public documents\n- Authenticated users: Own documents + public documents\n\nReturns the complete document including content JSON.","operationId":"get_document_api_v1_phototext__document_id__get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","title":"Document Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoTextDocumentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["phototext"],"summary":"Update Document","description":"Update an existing PhotoText document.\n\nAll fields are optional - only provided fields will be updated.\nUser can only update their own documents.","operationId":"update_document_api_v1_phototext__document_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","title":"Document Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoTextDocumentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhotoTextDocumentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["phototext"],"summary":"Delete Document","description":"Delete a PhotoText document.\n\nUser can only delete their own documents.\nThis is permanent and cannot be undone.","operationId":"delete_document_api_v1_phototext__document_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","title":"Document Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/database-stats":{"get":{"tags":["System"],"summary":"Get Database Stats","description":"Get database and storage statistics\n\nReturns overview of:\n- Table sizes (record count and disk size)\n- Cold storage usage\n- Total database file size\n\nNo authentication required - intended for system monitoring.","operationId":"get_database_stats_api_v1_database_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabaseStatsResponse"}}}}}}},"/debug/routes":{"get":{"summary":"List Routes","description":"Debug endpoint to show all available routes","operationId":"list_routes_debug_routes_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Simple health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AddPhotosRequest":{"properties":{"hothashes":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Hothashes","description":"Photos to add"}},"type":"object","required":["hothashes"],"title":"AddPhotosRequest","description":"Request to add photos to collection"},"AddTagsRequest":{"properties":{"tags":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Tags","description":"List of tag names to add"}},"type":"object","required":["tags"],"title":"AddTagsRequest","description":"Request body for adding tags to photo"},"AddTagsResponse":{"properties":{"hothash":{"type":"string","title":"Hothash"},"tags":{"items":{"$ref":"#/components/schemas/TagSummary"},"type":"array","title":"Tags"},"added":{"type":"integer","title":"Added","description":"Number of tags added"},"skipped":{"type":"integer","title":"Skipped","description":"Number of tags that were already applied","default":0},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["hothash","tags","added"],"title":"AddTagsResponse","description":"Response after adding tags to photo"},"AuthorCreateRequest":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Author name"},"email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Email","description":"Author email"},"bio":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Bio","description":"Author biography"}},"type":"object","required":["name"],"title":"AuthorCreateRequest","description":"Request model for creating authors"},"AuthorResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"image_count":{"type":"integer","title":"Image Count","description":"Number of images by this author","default":0}},"type":"object","required":["id","name","created_at"],"title":"AuthorResponse","description":"Author response model"},"AuthorSummary":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["id","name"],"title":"AuthorSummary","description":"Lightweight author info for photo responses"},"AuthorUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name","description":"Author name"},"email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Email","description":"Author email"},"bio":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Bio","description":"Author biography"}},"type":"object","title":"AuthorUpdateRequest","description":"Request model for updating authors"},"Body_register_image_api_v1_photos_register_image_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"Image file to register"}},"type":"object","required":["file"],"title":"Body_register_image_api_v1_photos_register_image_post"},"Body_upload_coldpreview_api_v1_photos__hothash__coldpreview_put":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"Coldpreview image file"}},"type":"object","required":["file"],"title":"Body_upload_coldpreview_api_v1_photos__hothash__coldpreview_put"},"CollectionListResponse":{"properties":{"collections":{"items":{"$ref":"#/components/schemas/PhotoCollectionResponse"},"type":"array","title":"Collections"},"total":{"type":"integer","title":"Total","description":"Total number of collections"}},"type":"object","required":["collections","total"],"title":"CollectionListResponse","description":"Response for listing collections"},"CoverImage":{"properties":{"hash":{"type":"string","title":"Hash","description":"Photo hothash (64-char SHA256)"},"alt":{"type":"string","maxLength":500,"minLength":1,"title":"Alt","description":"Alt text for cover image"}},"type":"object","required":["hash","alt"],"title":"CoverImage","description":"Cover image reference"},"DatabaseStatsResponse":{"properties":{"tables":{"additionalProperties":{"$ref":"#/components/schemas/TableStats"},"type":"object","title":"Tables","description":"Statistics per table"},"coldstorage":{"$ref":"#/components/schemas/StorageStats","description":"Cold storage statistics"},"database_file":{"type":"string","title":"Database File","description":"Database file path"},"database_size_bytes":{"type":"integer","minimum":0.0,"title":"Database Size Bytes","description":"Total database file size in bytes"},"database_size_mb":{"type":"number","minimum":0.0,"title":"Database Size Mb","description":"Total database file size in MB"}},"type":"object","required":["tables","coldstorage","database_file","database_size_bytes","database_size_mb"],"title":"DatabaseStatsResponse","description":"Complete database and storage statistics"},"DateRange":{"properties":{"first":{"type":"string","format":"date-time","title":"First","description":"Timestamp of earliest photo in bucket"},"last":{"type":"string","format":"date-time","title":"Last","description":"Timestamp of latest photo in bucket"}},"type":"object","required":["first","last"],"title":"DateRange","description":"Date range for a timeline bucket."},"DeleteTagResponse":{"properties":{"deleted_tag":{"type":"string","title":"Deleted Tag"},"photos_affected":{"type":"integer","title":"Photos Affected"},"message":{"type":"string","title":"Message"}},"type":"object","required":["deleted_tag","photos_affected","message"],"title":"DeleteTagResponse","description":"Response after deleting a tag completely"},"DocumentType":{"type":"string","enum":["general","album","slideshow"],"title":"DocumentType","description":"PhotoText document types"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ImageFileCreateSchema":{"properties":{"filename":{"type":"string","title":"Filename","description":"Original filename"},"file_size":{"type":"integer","title":"File Size","description":"File size in bytes"},"imported_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Imported Time","description":"When the file was imported"},"imported_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Imported Info","description":"Additional import metadata (source path, user, etc.)"},"local_storage_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Local Storage Info","description":"Local filesystem storage details"},"cloud_storage_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Cloud Storage Info","description":"Cloud storage details (S3, etc.)"}},"type":"object","required":["filename","file_size"],"title":"ImageFileCreateSchema","description":"Schema for creating an ImageFile record.\n\nRepresents metadata about a source image file (JPEG, RAW, etc.)\nthat belongs to a Photo."},"ImageFileResponse":{"properties":{"id":{"type":"integer","title":"Id"},"photo_hothash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Photo Hothash","description":"Photo hothash - links to Photo"},"filename":{"type":"string","title":"Filename","description":"Filename with extension (e.g. IMG_1234.jpg)"},"file_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"File Size","description":"File size in bytes"},"import_session_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Import Session Id","description":"Import session ID"},"imported_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Imported Time","description":"When this file was imported"},"imported_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Imported Info","description":"Import context and original location"},"local_storage_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Local Storage Info","description":"Local storage metadata"},"cloud_storage_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Cloud Storage Info","description":"Cloud storage metadata"},"file_format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Format","description":"File format computed from filename"},"file_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Path","description":"Full path computed by storage service"},"original_filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Filename","description":"Original filename from import session"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"When image was imported"}},"type":"object","required":["id","filename","created_at"],"title":"ImageFileResponse","description":"Complete image response model"},"ImageFileSummary":{"properties":{"id":{"type":"integer","title":"Id"},"filename":{"type":"string","title":"Filename"},"file_format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Format","description":"File format (jpeg, raw, etc)"},"file_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"File Size","description":"File size in bytes"}},"type":"object","required":["id","filename"],"title":"ImageFileSummary","description":"Summary of image files associated with a photo"},"ImportSessionCreateRequest":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Title","description":"User's title for this import (e.g., 'Italy Summer 2024')"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"User's notes or comments about this import"},"default_author_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Default Author Id","description":"Default photographer for this batch of photos"}},"type":"object","title":"ImportSessionCreateRequest","description":"Request to create an import session (user's reference metadata)"},"ImportSessionListResponse":{"properties":{"sessions":{"items":{"$ref":"#/components/schemas/ImportSessionResponse"},"type":"array","title":"Sessions"},"total":{"type":"integer","title":"Total","description":"Total number of sessions"}},"type":"object","required":["sessions","total"],"title":"ImportSessionListResponse","description":"Response for import session list"},"ImportSessionResponse":{"properties":{"id":{"type":"integer","title":"Id"},"imported_at":{"type":"string","format":"date-time","title":"Imported At"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"default_author_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Default Author Id"},"images_count":{"type":"integer","title":"Images Count","description":"Number of images in this import session","default":0}},"type":"object","required":["id","imported_at"],"title":"ImportSessionResponse","description":"Import session metadata response"},"ImportSessionUpdateRequest":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Title","description":"Updated title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Updated description"},"default_author_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Default Author Id","description":"Updated default author"}},"type":"object","title":"ImportSessionUpdateRequest","description":"Request to update import session metadata"},"PaginatedResponse_AuthorResponse_":{"properties":{"data":{"items":{"$ref":"#/components/schemas/AuthorResponse"},"type":"array","title":"Data","description":"Array of response items"},"meta":{"$ref":"#/components/schemas/PaginationMeta","description":"Pagination metadata"},"links":{"anyOf":[{"$ref":"#/components/schemas/PaginationLinks"},{"type":"null"}],"description":"Navigation links"}},"type":"object","required":["data","meta"],"title":"PaginatedResponse[AuthorResponse]"},"PaginatedResponse_PhotoResponse_":{"properties":{"data":{"items":{"$ref":"#/components/schemas/PhotoResponse"},"type":"array","title":"Data","description":"Array of response items"},"meta":{"$ref":"#/components/schemas/PaginationMeta","description":"Pagination metadata"},"links":{"anyOf":[{"$ref":"#/components/schemas/PaginationLinks"},{"type":"null"}],"description":"Navigation links"}},"type":"object","required":["data","meta"],"title":"PaginatedResponse[PhotoResponse]"},"PaginatedResponse_PhotoStackSummary_":{"properties":{"data":{"items":{"$ref":"#/components/schemas/PhotoStackSummary"},"type":"array","title":"Data","description":"Array of response items"},"meta":{"$ref":"#/components/schemas/PaginationMeta","description":"Pagination metadata"},"links":{"anyOf":[{"$ref":"#/components/schemas/PaginationLinks"},{"type":"null"}],"description":"Navigation links"}},"type":"object","required":["data","meta"],"title":"PaginatedResponse[PhotoStackSummary]"},"PaginationLinks":{"properties":{"self":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Self","description":"Current page URL"},"first":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First","description":"First page URL"},"prev":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prev","description":"Previous page URL"},"next":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next","description":"Next page URL"},"last":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last","description":"Last page URL"}},"type":"object","title":"PaginationLinks","description":"Navigation links for paginated responses (HATEOAS)"},"PaginationMeta":{"properties":{"total":{"type":"integer","title":"Total","description":"Total number of items"},"offset":{"type":"integer","title":"Offset","description":"Number of items skipped"},"limit":{"type":"integer","title":"Limit","description":"Maximum number of items returned"},"page":{"type":"integer","title":"Page","description":"Current page number (1-based)"},"pages":{"type":"integer","title":"Pages","description":"Total number of pages"}},"type":"object","required":["total","offset","limit","page","pages"],"title":"PaginationMeta","description":"Metadata for paginated responses"},"PhotoCollectionCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Collection name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Optional description"},"hothashes":{"items":{"type":"string"},"type":"array","title":"Hothashes","description":"Initial photos (optional)"}},"type":"object","required":["name"],"title":"PhotoCollectionCreate","description":"Schema for creating new collection"},"PhotoCollectionResponse":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Collection name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Optional description"},"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"hothashes":{"items":{"type":"string"},"type":"array","title":"Hothashes"},"photo_count":{"type":"integer","title":"Photo Count","description":"Number of photos in collection"},"cover_photo_hothash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cover Photo Hothash","description":"First photo (cover)"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","id","user_id","photo_count","created_at","updated_at"],"title":"PhotoCollectionResponse","description":"Schema for collection in API responses"},"PhotoCollectionUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","title":"PhotoCollectionUpdate","description":"Schema for updating collection metadata (not photos)"},"PhotoCreateRequest":{"properties":{"photo_create_schema":{"$ref":"#/components/schemas/PhotoCreateSchema"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Tag names to associate"}},"type":"object","required":["photo_create_schema"],"title":"PhotoCreateRequest","description":"Request wrapper for creating Photo via API.\n\nPhotoCreateSchema contains image data from imalink-core + frontend organization fields.\nThis wrapper adds tags (handled via separate PhotoTag relationship).\n\nBackend will add user_id from JWT token (not in PhotoCreateSchema)."},"PhotoCreateResponse":{"properties":{"id":{"type":"integer","title":"Id"},"hothash":{"type":"string","title":"Hothash"},"width":{"type":"integer","title":"Width"},"height":{"type":"integer","title":"Height"},"rating":{"type":"integer","title":"Rating"},"visibility":{"type":"string","title":"Visibility"},"taken_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Taken At"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"When photo was created in database"},"user_id":{"type":"integer","title":"User Id"},"is_duplicate":{"type":"boolean","title":"Is Duplicate","description":"True if hothash already existed","default":false}},"type":"object","required":["id","hothash","width","height","rating","visibility","created_at","user_id"],"title":"PhotoCreateResponse","description":"Response after creating Photo.\n\nExtends PhotoResponse with creation-specific fields."},"PhotoCreateSchema":{"properties":{"hothash":{"type":"string","title":"Hothash","description":"SHA256 hash of hotpreview (unique ID)"},"hotpreview_base64":{"type":"string","title":"Hotpreview Base64","description":"Base64 encoded JPEG preview (~200px)"},"exif_dict":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Exif Dict","description":"Complete EXIF data (camera_make, iso, etc. - flexible schema)"},"width":{"type":"integer","title":"Width","description":"Image width in pixels"},"height":{"type":"integer","title":"Height","description":"Image height in pixels"},"taken_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Taken At","description":"When photo was taken (for timeline queries)"},"gps_latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gps Latitude","description":"GPS latitude (for map queries)"},"gps_longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gps Longitude","description":"GPS longitude (for map queries)"},"rating":{"type":"integer","maximum":5.0,"minimum":0.0,"title":"Rating","description":"Star rating (0-5)","default":0},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category","description":"Category type (photo, screenshot, video, etc.)"},"visibility":{"type":"string","title":"Visibility","description":"Visibility level (private, space, authenticated, public)","default":"private"},"import_session_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Import Session Id","description":"Import batch this photo belongs to"},"author_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Author Id","description":"Photographer/creator ID"},"stack_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Stack Id","description":"Photo stack ID (for related images)"},"coldpreview_base64":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Coldpreview Base64","description":"Base64 encoded larger JPEG preview (optional)"},"timeloc_correction":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Timeloc Correction","description":"Time/location corrections (timezone fix, GPS override, etc.)"},"view_correction":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"View Correction","description":"Visual adjustments (rotation, crop hints for frontend)"},"image_file_list":{"items":{"$ref":"#/components/schemas/ImageFileCreateSchema"},"type":"array","title":"Image File List","description":"List of source image files (JPEG + RAW companions)"}},"type":"object","required":["hothash","hotpreview_base64","width","height"],"title":"PhotoCreateSchema","description":"Schema for creating a Photo (generated by imalink-core, enhanced by frontend).\n\nCreated by imalink-core from image file(s), then frontend adds user organization fields.\nBackend adds user_id from JWT token (NOT included in this schema).\n\nKey principles:\n- hothash is unique identifier (SHA256 of hotpreview)\n- exif_dict contains ALL EXIF metadata (flexible JSON)\n- Only taken_at, gps_latitude, gps_longitude copied to root for DB indexing\n- image_file_list contains one or more source files (JPEG + RAW companions)"},"PhotoManagementResponse":{"properties":{"collection_id":{"type":"integer","title":"Collection Id"},"photo_count":{"type":"integer","title":"Photo Count","description":"New photo count after operation"},"affected_count":{"type":"integer","title":"Affected Count","description":"Number of photos added/removed"},"cover_photo_hothash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cover Photo Hothash","description":"New cover photo"}},"type":"object","required":["collection_id","photo_count","affected_count"],"title":"PhotoManagementResponse","description":"Response for photo add/remove/reorder operations"},"PhotoResponse":{"properties":{"hothash":{"type":"string","title":"Hothash","description":"Content-based hash identifier"},"width":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Width","description":"Original image width in pixels"},"height":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Height","description":"Original image height in pixels"},"coldpreview_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Coldpreview Path","description":"Filesystem path to coldpreview file"},"coldpreview_width":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Coldpreview Width","description":"Coldpreview width (computed from file)"},"coldpreview_height":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Coldpreview Height","description":"Coldpreview height (computed from file)"},"coldpreview_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Coldpreview Size","description":"Coldpreview file size (computed from file)"},"taken_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Taken At","description":"When photo was taken (from EXIF)"},"gps_latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gps Latitude","description":"GPS latitude"},"gps_longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gps Longitude","description":"GPS longitude"},"exif_dict":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Exif Dict","description":"EXIF metadata from master image file"},"timeloc_correction":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Timeloc Correction","description":"Time/location correction metadata"},"view_correction":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"View Correction","description":"View correction settings (rotation, crop, exposure)"},"rating":{"type":"integer","maximum":5.0,"minimum":0.0,"title":"Rating","description":"User rating (0-5 stars)","default":0},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category","description":"User-defined category (e.g., 'hobby', 'work', 'family')"},"visibility":{"type":"string","title":"Visibility","description":"Photo visibility: 'private', 'space', 'authenticated', or 'public'","default":"private"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"When photo was imported"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"When photo was last updated"},"author":{"anyOf":[{"$ref":"#/components/schemas/AuthorSummary"},{"type":"null"}],"description":"Photo author/photographer"},"author_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Author Id","description":"Author ID"},"import_session_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Import Session Id","description":"Import session that created this photo"},"first_imported":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"First Imported","description":"Earliest file import time"},"last_imported":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Imported","description":"Latest file import time"},"has_gps":{"type":"boolean","title":"Has Gps","description":"Whether photo has GPS coordinates","default":false},"has_raw_companion":{"type":"boolean","title":"Has Raw Companion","description":"Whether photo has both JPEG and RAW files","default":false},"primary_filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Filename","description":"Primary filename for display"},"files":{"items":{"$ref":"#/components/schemas/ImageFileSummary"},"type":"array","title":"Files","description":"Associated image files"},"tags":{"items":{},"type":"array","title":"Tags","description":"Tags applied to this photo"}},"type":"object","required":["hothash","created_at","updated_at"],"title":"PhotoResponse","description":"Complete photo response model"},"PhotoSearchRequest":{"properties":{"author_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Author Id","description":"Filter by author ID (exact match)"},"import_session_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Import Session Id","description":"Filter by import session ID (exact match)"},"tag_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Tag Ids","description":"Filter by tag IDs (photos with ANY of these tags)"},"rating_min":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":0.0},{"type":"null"}],"title":"Rating Min","description":"Minimum rating (inclusive)"},"rating_max":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":0.0},{"type":"null"}],"title":"Rating Max","description":"Maximum rating (inclusive)"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category","description":"Filter by category (exact match)"},"taken_after":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Taken After","description":"Photos taken after this date (inclusive)"},"taken_before":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Taken Before","description":"Photos taken before this date (inclusive)"},"has_gps":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Gps","description":"True: only with GPS, False: only without GPS, None: all"},"has_raw":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Raw","description":"True: only with RAW, False: only without RAW, None: all"},"offset":{"type":"integer","minimum":0.0,"title":"Offset","description":"Number of items to skip","default":0},"limit":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Limit","description":"Maximum number of items to return","default":100},"sort_by":{"type":"string","title":"Sort By","description":"Sort field (taken_at, created_at, rating)","default":"taken_at"},"sort_order":{"type":"string","pattern":"^(asc|desc)$","title":"Sort Order","description":"Sort order (asc or desc)","default":"desc"}},"additionalProperties":false,"type":"object","title":"PhotoSearchRequest","description":"Request model for photo search\n\nSearch criteria rules:\n- All filters are optional (None = ignore this filter)\n- Multiple filters are combined with AND logic\n- Empty search (all fields None) returns all photos (with pagination)\n- tag_ids uses OR logic (photos with ANY of the specified tags)\n- For ranges (rating, dates): both min/max are inclusive"},"PhotoStackAddPhotoRequest":{"properties":{"photo_hothash":{"type":"string","title":"Photo Hothash","description":"Photo hash to add to stack"}},"type":"object","required":["photo_hothash"],"title":"PhotoStackAddPhotoRequest","description":"Request model for adding a single photo to stack"},"PhotoStackCreateRequest":{"properties":{"stack_type":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Stack Type","description":"Type of stack: burst, panorama, timelapse, etc."},"title":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Title","description":"Optional user-friendly name for the stack"}},"type":"object","title":"PhotoStackCreateRequest","description":"Request model for creating a new PhotoStack"},"PhotoStackDetail":{"properties":{"id":{"type":"integer","title":"Id","description":"Unique identifier for the photo stack"},"stack_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stack Type","description":"Type of stack"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title","description":"User-friendly name for the stack"},"photo_hothashes":{"items":{"type":"string"},"type":"array","title":"Photo Hothashes","description":"List of photo hashes in the stack"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"When the stack was created"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"When the stack was last updated"}},"type":"object","required":["id","created_at","updated_at"],"title":"PhotoStackDetail","description":"Detailed view of a PhotoStack with photo hashes"},"PhotoStackOperationResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"message":{"type":"string","title":"Message","description":"Operation result message"},"stack":{"anyOf":[{"$ref":"#/components/schemas/PhotoStackDetail"},{"type":"null"}],"description":"The affected stack (for create/update operations)"}},"type":"object","required":["success","message"],"title":"PhotoStackOperationResponse","description":"Response for PhotoStack CRUD operations"},"PhotoStackPhotoResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"message":{"type":"string","title":"Message","description":"Operation result message"},"stack":{"anyOf":[{"$ref":"#/components/schemas/PhotoStackDetail"},{"type":"null"}],"description":"Updated stack details (null if stack was deleted)"}},"type":"object","required":["success","message"],"title":"PhotoStackPhotoResponse","description":"Response for single photo add/remove operations"},"PhotoStackSummary":{"properties":{"id":{"type":"integer","title":"Id","description":"Unique identifier for the photo stack"},"stack_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stack Type","description":"Type of stack"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title","description":"User-friendly name for the stack"},"photo_count":{"type":"integer","title":"Photo Count","description":"Number of photos in this stack"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"When the stack was created"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"When the stack was last updated"}},"type":"object","required":["id","photo_count","created_at","updated_at"],"title":"PhotoStackSummary","description":"Summary view of a PhotoStack (used in lists)"},"PhotoStackUpdateRequest":{"properties":{"stack_type":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Stack Type","description":"Updated stack type"},"title":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Title","description":"Updated title"}},"type":"object","title":"PhotoStackUpdateRequest","description":"Request model for updating PhotoStack metadata"},"PhotoTextDocumentCreate":{"properties":{"title":{"type":"string","maxLength":500,"minLength":1,"title":"Title","description":"Document title"},"document_type":{"$ref":"#/components/schemas/DocumentType","description":"Document type (general/album/slideshow)"},"content":{"additionalProperties":true,"type":"object","title":"Content","description":"Complete PhotoText JSON document structure"},"abstract":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Abstract","description":"Short description/summary"},"cover_image":{"anyOf":[{"$ref":"#/components/schemas/CoverImage"},{"type":"null"}],"description":"Cover image reference"},"is_published":{"type":"boolean","title":"Is Published","description":"Publication status","default":false},"visibility":{"anyOf":[{"type":"string","pattern":"^(private|space|authenticated|public)$"},{"type":"null"}],"title":"Visibility","description":"Document visibility (optional, defaults to 'private' for backwards compatibility)","default":"private"}},"type":"object","required":["title","document_type","content"],"title":"PhotoTextDocumentCreate","description":"Schema for creating a PhotoText document"},"PhotoTextDocumentListResponse":{"properties":{"documents":{"items":{"$ref":"#/components/schemas/PhotoTextDocumentSummary"},"type":"array","title":"Documents","description":"List of documents"},"total":{"type":"integer","title":"Total","description":"Total number of documents matching filters"},"limit":{"type":"integer","title":"Limit","description":"Page size"},"offset":{"type":"integer","title":"Offset","description":"Page offset"}},"type":"object","required":["documents","total","limit","offset"],"title":"PhotoTextDocumentListResponse","description":"Schema for paginated document list responses"},"PhotoTextDocumentResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Document ID"},"user_id":{"type":"integer","title":"User Id","description":"Owner user ID"},"title":{"type":"string","title":"Title","description":"Document title"},"document_type":{"type":"string","title":"Document Type","description":"Document type"},"content":{"additionalProperties":true,"type":"object","title":"Content","description":"Complete PhotoText JSON document"},"abstract":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Abstract","description":"Short description"},"cover_image_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cover Image Hash","description":"Cover image hash"},"cover_image_alt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cover Image Alt","description":"Cover image alt text"},"is_published":{"type":"boolean","title":"Is Published","description":"Publication status"},"published_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Published At","description":"Publication timestamp"},"visibility":{"type":"string","title":"Visibility","description":"Document visibility: 'private', 'space', 'authenticated', or 'public'","default":"private"},"version":{"type":"string","title":"Version","description":"Document version"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Creation timestamp"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Last update timestamp"}},"type":"object","required":["id","user_id","title","document_type","content","is_published","version","created_at","updated_at"],"title":"PhotoTextDocumentResponse","description":"Schema for PhotoText document responses"},"PhotoTextDocumentSummary":{"properties":{"id":{"type":"integer","title":"Id","description":"Document ID"},"title":{"type":"string","title":"Title","description":"Document title"},"document_type":{"type":"string","title":"Document Type","description":"Document type"},"abstract":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Abstract","description":"Short description"},"cover_image_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cover Image Hash","description":"Cover image hash"},"cover_image_alt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cover Image Alt","description":"Cover image alt text"},"is_published":{"type":"boolean","title":"Is Published","description":"Publication status"},"published_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Published At","description":"Publication timestamp"},"visibility":{"type":"string","title":"Visibility","description":"Document visibility: 'private', 'space', 'authenticated', or 'public'","default":"private"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Creation timestamp"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Last update timestamp"}},"type":"object","required":["id","title","document_type","is_published","created_at","updated_at"],"title":"PhotoTextDocumentSummary","description":"Lightweight document info for list views"},"PhotoTextDocumentUpdate":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":500,"minLength":1},{"type":"null"}],"title":"Title","description":"Document title"},"content":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Content","description":"Complete PhotoText JSON document structure"},"abstract":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Abstract","description":"Short description/summary"},"cover_image":{"anyOf":[{"$ref":"#/components/schemas/CoverImage"},{"type":"null"}],"description":"Cover image reference"},"is_published":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Published","description":"Publication status"},"visibility":{"anyOf":[{"type":"string","pattern":"^(private|space|authenticated|public)$"},{"type":"null"}],"title":"Visibility","description":"Document visibility (optional, backwards compatible)"}},"type":"object","title":"PhotoTextDocumentUpdate","description":"Schema for updating a PhotoText document"},"PhotoUpdateRequest":{"properties":{"rating":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":0.0},{"type":"null"}],"title":"Rating","description":"User rating"},"category":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Category","description":"User-defined category"},"author_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Author Id","description":"Author/photographer ID"},"visibility":{"anyOf":[{"type":"string","pattern":"^(private|space|authenticated|public)$"},{"type":"null"}],"title":"Visibility","description":"Photo visibility (optional, backwards compatible)"}},"additionalProperties":false,"type":"object","title":"PhotoUpdateRequest","description":"Request model for updating existing photos"},"RelativeCrop":{"properties":{"x":{"type":"number","exclusiveMaximum":1.0,"minimum":0.0,"title":"X","description":"Left edge (0.0 = left, 1.0 = right)"},"y":{"type":"number","exclusiveMaximum":1.0,"minimum":0.0,"title":"Y","description":"Top edge (0.0 = top, 1.0 = bottom)"},"width":{"type":"number","maximum":1.0,"exclusiveMinimum":0.0,"title":"Width","description":"Width (0.0-1.0)"},"height":{"type":"number","maximum":1.0,"exclusiveMinimum":0.0,"title":"Height","description":"Height (0.0-1.0)"}},"type":"object","required":["x","y","width","height"],"title":"RelativeCrop","description":"Relative crop coordinates (0.0-1.0 normalized)"},"RemovePhotosRequest":{"properties":{"hothashes":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Hothashes","description":"Photos to remove"}},"type":"object","required":["hothashes"],"title":"RemovePhotosRequest","description":"Request to remove photos from collection"},"RemoveTagResponse":{"properties":{"hothash":{"type":"string","title":"Hothash"},"removed_tag":{"type":"string","title":"Removed Tag"},"remaining_tags":{"items":{"$ref":"#/components/schemas/TagSummary"},"type":"array","title":"Remaining Tags"}},"type":"object","required":["hothash","removed_tag","remaining_tags"],"title":"RemoveTagResponse","description":"Response after removing a tag from photo"},"RenameTagResponse":{"properties":{"id":{"type":"integer","title":"Id"},"old_name":{"type":"string","title":"Old Name"},"new_name":{"type":"string","title":"New Name"},"photo_count":{"type":"integer","title":"Photo Count"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","old_name","new_name","photo_count","updated_at"],"title":"RenameTagResponse","description":"Response after renaming a tag"},"ReorderPhotosRequest":{"properties":{"hothashes":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Hothashes","description":"All photos in new order"}},"type":"object","required":["hothashes"],"title":"ReorderPhotosRequest","description":"Request to reorder photos in collection"},"SavedPhotoSearchCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name","description":"User-friendly name for the search"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description","description":"Optional description"},"search_criteria":{"additionalProperties":true,"type":"object","title":"Search Criteria","description":"PhotoSearchRequest as dict"},"is_favorite":{"type":"boolean","title":"Is Favorite","description":"Mark as favorite","default":false}},"additionalProperties":false,"type":"object","required":["name","search_criteria"],"title":"SavedPhotoSearchCreate","description":"Request to create a new saved photo search"},"SavedPhotoSearchListResponse":{"properties":{"searches":{"items":{"$ref":"#/components/schemas/SavedPhotoSearchSummary"},"type":"array","title":"Searches"},"total":{"type":"integer","title":"Total"},"offset":{"type":"integer","title":"Offset"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["searches","total","offset","limit"],"title":"SavedPhotoSearchListResponse","description":"Paginated list of saved photo searches"},"SavedPhotoSearchResponse":{"properties":{"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"search_criteria":{"additionalProperties":true,"type":"object","title":"Search Criteria"},"is_favorite":{"type":"boolean","title":"Is Favorite"},"result_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Result Count"},"last_executed":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Executed"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","user_id","name","description","search_criteria","is_favorite","result_count","last_executed","created_at","updated_at"],"title":"SavedPhotoSearchResponse","description":"Response model for saved photo search"},"SavedPhotoSearchSummary":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"is_favorite":{"type":"boolean","title":"Is Favorite"},"result_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Result Count"},"last_executed":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Executed"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","name","description","is_favorite","result_count","last_executed","created_at"],"title":"SavedPhotoSearchSummary","description":"Summary view of saved photo search (for lists)"},"SavedPhotoSearchUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description"},"search_criteria":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Search Criteria","description":"Updated search criteria"},"is_favorite":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Favorite"}},"additionalProperties":false,"type":"object","title":"SavedPhotoSearchUpdate","description":"Request to update a saved photo search"},"StorageStats":{"properties":{"path":{"type":"string","title":"Path","description":"Storage path"},"total_files":{"type":"integer","minimum":0.0,"title":"Total Files","description":"Total number of files"},"total_size_bytes":{"type":"integer","minimum":0.0,"title":"Total Size Bytes","description":"Total size in bytes"},"total_size_mb":{"type":"number","minimum":0.0,"title":"Total Size Mb","description":"Total size in MB"},"total_size_gb":{"type":"number","minimum":0.0,"title":"Total Size Gb","description":"Total size in GB"}},"type":"object","required":["path","total_files","total_size_bytes","total_size_mb","total_size_gb"],"title":"StorageStats","description":"Statistics for file storage"},"TableStats":{"properties":{"name":{"type":"string","title":"Name","description":"Table name"},"record_count":{"type":"integer","minimum":0.0,"title":"Record Count","description":"Number of records in the table"},"size_bytes":{"type":"integer","minimum":0.0,"title":"Size Bytes","description":"Approximate size on disk in bytes"},"size_mb":{"type":"number","minimum":0.0,"title":"Size Mb","description":"Approximate size on disk in MB"}},"type":"object","required":["name","record_count","size_bytes","size_mb"],"title":"TableStats","description":"Statistics for a single database table"},"TagAutocompleteItem":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"photo_count":{"type":"integer","title":"Photo Count"}},"type":"object","required":["id","name","photo_count"],"title":"TagAutocompleteItem","description":"Autocomplete suggestion item"},"TagAutocompleteResponse":{"properties":{"suggestions":{"items":{"$ref":"#/components/schemas/TagAutocompleteItem"},"type":"array","title":"Suggestions"}},"type":"object","required":["suggestions"],"title":"TagAutocompleteResponse","description":"Response for autocomplete endpoint"},"TagListResponse":{"properties":{"tags":{"items":{"$ref":"#/components/schemas/TagResponse"},"type":"array","title":"Tags"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["tags","total"],"title":"TagListResponse","description":"Response for listing tags"},"TagResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"photo_count":{"type":"integer","title":"Photo Count","description":"Number of photos with this tag","default":0},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","name","created_at","updated_at"],"title":"TagResponse","description":"Full tag response with metadata"},"TagSummary":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["id","name"],"title":"TagSummary","description":"Minimal tag info for inclusion in photo responses"},"TagUpdate":{"properties":{"new_name":{"type":"string","maxLength":50,"minLength":1,"title":"New Name","description":"New tag name"}},"type":"object","required":["new_name"],"title":"TagUpdate","description":"Schema for updating/renaming a tag"},"TimeLocCorrectionRequest":{"properties":{"taken_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Taken At","description":"Corrected timestamp"},"gps_latitude":{"anyOf":[{"type":"number","maximum":90.0,"minimum":-90.0},{"type":"null"}],"title":"Gps Latitude","description":"Corrected GPS latitude"},"gps_longitude":{"anyOf":[{"type":"number","maximum":180.0,"minimum":-180.0},{"type":"null"}],"title":"Gps Longitude","description":"Corrected GPS longitude"},"correction_reason":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Correction Reason","description":"User explanation for correction"}},"type":"object","title":"TimeLocCorrectionRequest","description":"Request for time/location correction"},"TimelineBucket":{"properties":{"year":{"type":"integer","title":"Year","description":"Year (1900-2100)"},"month":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Month","description":"Month (1-12), present for month/day/hour granularity"},"day":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Day","description":"Day of month (1-31), present for day/hour granularity"},"hour":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Hour","description":"Hour (0-23), present for hour granularity"},"count":{"type":"integer","title":"Count","description":"Number of photos in this bucket"},"preview_hothash":{"type":"string","title":"Preview Hothash","description":"HotHash of representative photo"},"preview_url":{"type":"string","title":"Preview Url","description":"URL to hotpreview of representative photo"},"date_range":{"$ref":"#/components/schemas/DateRange","description":"Date range of photos in bucket"}},"type":"object","required":["year","count","preview_hothash","preview_url","date_range"],"title":"TimelineBucket","description":"A time bucket with aggregated photo data.","example":{"count":45,"date_range":{"first":"2024-06-01T08:00:00Z","last":"2024-06-30T22:45:00Z"},"month":6,"preview_hothash":"abc123def456...","preview_url":"/api/v1/photos/abc123def456.../hotpreview","year":2024}},"TimelineMeta":{"properties":{"total_years":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Years","description":"Total years with photos"},"total_months":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Months","description":"Total months with photos (when filtered by year)"},"total_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Days","description":"Total days with photos (when filtered by month)"},"total_hours":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Hours","description":"Total hours with photos (when filtered by day)"},"total_photos":{"type":"integer","title":"Total Photos","description":"Total photos in current view"},"granularity":{"type":"string","enum":["year","month","day","hour"],"title":"Granularity","description":"Time bucket granularity"},"year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year","description":"Filtered year"},"month":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Month","description":"Filtered month"},"day":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Day","description":"Filtered day"}},"type":"object","required":["total_photos","granularity"],"title":"TimelineMeta","description":"Metadata for timeline response."},"TimelineResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/TimelineBucket"},"type":"array","title":"Data","description":"Array of timeline buckets"},"meta":{"$ref":"#/components/schemas/TimelineMeta","description":"Timeline metadata"}},"type":"object","required":["data","meta"],"title":"TimelineResponse","description":"Timeline API response.","example":{"data":[{"count":1247,"date_range":{"first":"2024-01-05T08:23:12Z","last":"2024-12-28T19:45:00Z"},"preview_hothash":"abc123...","preview_url":"/api/v1/photos/abc123.../hotpreview","year":2024}],"meta":{"granularity":"year","total_photos":4521,"total_years":5}}},"UserChangePassword":{"properties":{"current_password":{"type":"string","title":"Current Password","description":"Current password for verification"},"new_password":{"type":"string","minLength":8,"title":"New Password","description":"New password"}},"type":"object","required":["current_password","new_password"],"title":"UserChangePassword","description":"Schema for changing user password"},"UserCreate":{"properties":{"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username","description":"Unique username"},"email":{"type":"string","format":"email","title":"Email","description":"User's email address"},"display_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Display Name","description":"Display name for the user"},"is_active":{"type":"boolean","title":"Is Active","description":"Whether the user account is active","default":true},"password":{"type":"string","minLength":8,"title":"Password","description":"User's password (will be hashed)"}},"type":"object","required":["username","email","password"],"title":"UserCreate","description":"Schema for creating a new user"},"UserLogin":{"properties":{"username":{"type":"string","title":"Username","description":"Username or email"},"password":{"type":"string","title":"Password","description":"User's password"}},"type":"object","required":["username","password"],"title":"UserLogin","description":"Schema for user login"},"UserResponse":{"properties":{"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username","description":"Unique username"},"email":{"type":"string","format":"email","title":"Email","description":"User's email address"},"display_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Display Name","description":"Display name for the user"},"is_active":{"type":"boolean","title":"Is Active","description":"Whether the user account is active","default":true},"id":{"type":"integer","title":"Id","description":"User's unique ID"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"When the user account was created"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"When the user account was last updated"},"photos_count":{"type":"integer","title":"Photos Count","description":"Number of photos owned by this user","default":0},"import_sessions_count":{"type":"integer","title":"Import Sessions Count","description":"Number of import sessions created by this user","default":0},"authors_count":{"type":"integer","title":"Authors Count","description":"Number of authors created by this user","default":0}},"type":"object","required":["username","email","id","created_at","updated_at"],"title":"UserResponse","description":"Schema for User API responses"},"UserToken":{"properties":{"access_token":{"type":"string","title":"Access Token","description":"JWT access token"},"token_type":{"type":"string","title":"Token Type","description":"Token type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In","description":"Token expiration time in seconds"},"user":{"$ref":"#/components/schemas/UserResponse","description":"User information"}},"type":"object","required":["access_token","expires_in","user"],"title":"UserToken","description":"Schema for authentication token response"},"UserUpdate":{"properties":{"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email","description":"New email address"},"display_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Display Name","description":"New display name"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","description":"Update active status"}},"type":"object","title":"UserUpdate","description":"Schema for updating user information"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"ViewCorrectionRequest":{"properties":{"rotation":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rotation","description":"Rotation in degrees (0, 90, 180, 270)"},"relative_crop":{"anyOf":[{"$ref":"#/components/schemas/RelativeCrop"},{"type":"null"}],"description":"Crop using normalized coordinates"},"exposure_adjust":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Exposure Adjust","description":"Exposure adjustment (-2.0 to +2.0)"}},"type":"object","title":"ViewCorrectionRequest","description":"Request for view correction (frontend rendering hints only)"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"},"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"auth/login"}}}}}}